using UnityEngine;public class Player : uLink.MonoBehaviour{    private const string AxisNameHorizontal = "Horizontal";    private const string AxisNameVertical = "Vertical";	    public Vector3 currentMovement;    public float moveSpeed = 5;    public CharacterController controller;	public float weaponCooldown = 0.1f;	private float weaponTimer;	public float rotationSpeed = 10;	private float noShootTimer;	public string[] leftStickAxis = {"Horizontal", "Vertical"};	public string[] rightStickAxis = {"RSHorizontal", "RSVertical"};		public int weaponId;	public float health = 10;	public float damageCooldown = 0.2f;	private float damageCooldownTimer;	public tk2dSlicedSprite healthBar;	void Awake ()	{        if (controller == null)        {            controller = GetComponent<CharacterController>();        }	}	void Update ()	{		currentMovement[0] = Mathf.Abs(Input.GetAxis(AxisNameHorizontal)) > 0.1f ? Input.GetAxis(AxisNameHorizontal) : 0;		currentMovement[1] = Mathf.Abs(Input.GetAxis(AxisNameVertical)) > 0.1f ? Input.GetAxis(AxisNameVertical) : 0;	    controller.Move(currentMovement*moveSpeed*Time.deltaTime);		float y = Input.GetAxis(rightStickAxis[1]);		float x = Input.GetAxis(rightStickAxis[0]);		if (Mathf.Abs(Input.GetAxis(rightStickAxis[0])) <= 0.1f && Mathf.Abs(Input.GetAxis(rightStickAxis[1])) <= 0.1f)		{			noShootTimer -= Time.deltaTime;		}else		{			noShootTimer = 1.5f;		}		if (noShootTimer > 0){			if (Mathf.Abs(y) > 0.1f || Mathf.Abs(x) > 0.1f ){				Vector3 targetEuler = new Vector3(0,0, (Mathf.Atan2(y, x))*180/(Mathf.PI));				//transform.localEulerAngles = Vector3.Lerp(transform.eulerAngles, targetEuler, Time.deltaTime * 15);				transform.localEulerAngles = new Vector3(0,0,Mathf.LerpAngle(transform.localEulerAngles.z, targetEuler.z, Time.deltaTime * rotationSpeed));				if (Mathf.Abs(y) > 0.6f || Mathf.Abs(x) > 0.6f ){					WeaponShoot();				}			}		}else		{			y = Input.GetAxis(leftStickAxis[1]);			x = Input.GetAxis(leftStickAxis[0]);			if (Mathf.Abs(y) > 0.1f || Mathf.Abs(x) > 0.1f ){				Vector3 targetEuler = new Vector3(0,0, (Mathf.Atan2(y, x))*180/(Mathf.PI));				transform.localEulerAngles = new Vector3(0,0,Mathf.LerpAngle(transform.localEulerAngles.z, targetEuler.z, Time.deltaTime * 7));			}		}		weaponTimer -= Time.deltaTime;		if (Input.GetKeyDown(KeyCode.A))		{			TextPopup dmgTxt = PREFAB.SpawnPrefab(PREFAB.DAMAGE_TEXT, transform.position - new Vector3(0,0,5), "1").GetComponent<TextPopup>();			dmgTxt.ChangeText("DEAD COSMONAUGHTS", Color.red);		}		damageCooldownTimer -= Time.deltaTime;	}	void WeaponShoot()	{		if (weaponId == 0)		{			if (weaponTimer <= 0)			{				PREFAB.SpawnPrefab(PREFAB.BULLET, transform.position, transform.localEulerAngles-new Vector3(0,0,90), "1");				weaponTimer = weaponCooldown;			}		}else if (weaponId == 1)		{			if (weaponTimer <= 0)			{				PREFAB.SpawnPrefab(PREFAB.BULLET, transform.position, transform.localEulerAngles-new Vector3(0,0,90), "1");				weaponTimer = weaponCooldown*0.8f;			}		}		else if (weaponId == 2)		{			if (weaponTimer <= 0)			{				for (int i = 0; i < 5; i++)				{					PREFAB.SpawnPrefab(PREFAB.BULLET, transform.position, transform.localEulerAngles-new Vector3(0,0,76+(i*7)), "1");				}				weaponTimer = weaponCooldown*4.5f;			}		}	}	public void ChangeWeapon (int id)	{		weaponId = id;	}	void OnTriggerEnter (Collider other)	{		if (other.CompareTag("Bullet") && damageCooldownTimer <= 0)		{			Bullet bullet = other.GetComponent<Bullet>();			TextPopup txtPop = PREFAB.SpawnPrefab(PREFAB.DAMAGE_TEXT, transform.position-new Vector3(0,0,5), "1").GetComponent<TextPopup>();			int damage = bullet.damage;			txtPop.ChangeText(damage.ToString("f0"));			health -= damage;			UpdateHealth();			PREFAB.SpawnPrefab(PREFAB.HIT_IMPACT, other.transform.position - new Vector3(Random.Range(-0.1f, 0.1f), Random.Range(-0.1f, 0.1f),5), "1");			damageCooldownTimer = damageCooldown;		}	}	void UpdateHealth()	{	}}